# Глава 63. Архитектурные договоренности и поддержка проекта

Хорошая архитектура — это не только структура папок, но и договорённости команды.

---

## 63.1. Границы и зависимости

- Чётко разделяй ответственность между слоями.
- Не допускай «скрытых» импортов между фичами.
- Правило: верхние слои не зависят от нижних напрямую.

---

## 63.2. Договорённости, которые реально помогают

- Единые правила нейминга и структуры.
- Ограничение размера модулей и компонентов.
- Обязательные ревью для рискованных изменений.

---

## 63.3. Управление техдолгом

- Долг фиксируется в задачах, а не в голове.
- Нет времени чинить — фиксируем, когда вернёмся.
- Регулярно вычищаем «устаревшие» модули.

---

## 63.4. Архитектурные решения как документ

Если решение влияет на весь проект:

- запиши коротко «почему» и «какие есть альтернативы»,
- держи это рядом с кодом,
- обновляй, когда правило меняется.

Это защищает от хаоса в больших командах.

---

## 63.5. Границы модулей

- Один модуль — одна ответственность.
- Не давай модулям «знать всё» про соседей.
- Зависимости должны быть очевидны.

Если зависимость неочевидна — она обычно вредная.

---

## 63.6. Соглашения по коду

- Единый стиль импортов.
- Минимум «магии» в папках.
- Стабильные правила нейминга.

Чем меньше сюрпризов, тем быстрее читается код.

---

## 63.7. Ревью как часть архитектуры

- Ревью фиксирует архитектурные договорённости.
- Замечания должны быть про риски, а не про вкусы.
- Критичные изменения — всегда через ревью.

Это дешевле, чем «чинить после релиза».

---

## 63.8. Данные и границы

- Публичные данные отделяй от приватных.
- Чётко определяй, где хранятся бизнес-правила.
- Не размазывай логику по UI-компонентам.

---

## 63.9. Переиспользование без хаоса

- Общие компоненты должны быть действительно общими.
- Локальные решения — в пределах фичи.
- Избегай «общих» утилит, которые никто не понимает.

---

## 63.10. Рефакторинг как процесс

- Маленькие шаги безопаснее, чем один большой.
- Любой рефакторинг должен иметь цель.
- Если нет тестов — рефакторинг опаснее.

---

## 63.11. Архитектурные метрики

- Скорость разработки новых фич.
- Количество конфликтов и хотфиксов.
- Понятность кода новым людям.

Если эти метрики падают — архитектура страдает.

---

## 63.12. Мини-чек-лист архитектурного ревью

- Понятны ли зависимости модуля.
- Не нарушены ли границы слоёв.
- Есть ли тесты на ключевую логику.
- Есть ли документированные решения.
